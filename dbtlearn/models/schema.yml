version: 2
models:
  - name: fct_sales
    tests:
      - dbt_expectations.expect_table_row_count_to_equal_other_table:
          compare_model: ref('dim_customers')
    columns:
      - name: CUSTOMERID
        description: This is a unique identifier for each customer. It is a numeric
          field and is used to join the fact sales table with the customer
          dimension table.
        data_type: NUMBER
      - name: PRODUCTID
        description: This is a unique identifier for each product sold. It is a foreign
          key that links to the product dimension table.
        data_type: NUMBER
      - name: DATE_ID
        description: This column represents the unique identifier for the date of the
          sale. It is generated by applying the MD5 hash function to the date.
          If the date is null, a placeholder value
          '_dbt_utils_surrogate_key_null_' is used instead.
        data_type: VARCHAR
      - name: UNIT_COST
        description: This column represents the cost of a single unit of a product. It
          is derived from the 'UnitCost' column in the raw shop data.
        data_type: NUMBER
      - name: UNIT_PRICE
        description: This column represents the price per unit of the product sold. It
          is derived from the 'UnitPrice' column in the raw shop data.
        data_type: NUMBER
      - name: CAMPAIGNID
        description: The CAMPAIGNID column represents the unique identifier for the
          marketing campaign associated with each sale. This ID can be used to
          link sales data with specific marketing campaigns.
        data_type: NUMBER
    description: "The fct_sales model is a fact table that contains sales data. It
      includes the following columns: CustomerID, ProductID, date_id, unit_cost,
      unit_price, and CampaignID. The model is created by joining the raw sales
      data from the SHOP.RAW.SHOP source with the dim_dates, dim_products, and
      dim_customers dimension tables from the SHOP.DEV schema. The date_id
      column is created by hashing the Date column from the raw sales data. If
      the Date column is null, a placeholder value is used for the hash. The
      unit_cost and unit_price columns are directly taken from the raw sales
      data. The CustomerID, ProductID, and CampaignID columns are also taken
      from the raw sales data, but they are used to join with the dimension
      tables to ensure that only valid sales data is included in the model."
  - name: dim_customers
    columns:
      - name: CUSTOMERID
        description: The CUSTOMERID column is a unique identifier for each customer.
          This is a primary key for the dim_customers table.
        data_type: NUMBER
        tests:
          - not_null
      - name: EMAIL
        description: The EMAIL column contains the email addresses of the customers. If
          the email address is not available, the value is set to 'Anonymous'.
        data_type: VARCHAR
      - name: DISTRICT
        description: The DISTRICT column represents the district where the customer
          resides. If the district information is not available, the value is
          set to 'Anonymous'.
        data_type: VARCHAR
      - name: CITY
        description: The city where the customer resides. If the city is not provided,
          the value will be 'Anonymous'.
        data_type: VARCHAR
      - name: STATE
        description: The STATE column represents the state where the customer resides.
          If the state information is not available, the value is set to
          'Anonymous'.
        data_type: VARCHAR
      - name: REGION
        description: The REGION column represents the geographical region where the
          customer is located. If the region information is not available, the
          value is set to 'Anonymous'.
        data_type: VARCHAR
        tests:
          - accepted_values:
              values:
                - East
                - West
                - Central
      - name: COUNTRY
        description: The COUNTRY column represents the country where the customer
          resides. If the country information is not available, the value is set
          to 'Anonymous'.
        data_type: VARCHAR
      - name: ZIPCODE
        description: The ZIPCODE column contains the postal code for the customer's
          location. This data is sourced from the src_customers table in the
          SHOP.DEV schema. If the original data is null, the ZIPCODE will be set
          to 'Anonymous'.
        data_type: NUMBER
      - name: TIMESTAMP_COLUMN
        description: This column represents the timestamp when the record was created or
          last updated. It is useful for tracking changes over time.
        data_type: TIMESTAMP_NTZ
  - name: dim_products
    columns:
      - name: PRODUCTID
        description: This is the unique identifier for each product. It is a primary key
          in the dim_products model and is used to link to other tables in the
          database.
        data_type: NUMBER
      - name: PRODUCT
        description: This column contains the name of the product. If the product name
          is not available, the value is set to 'Anonymous'.
        data_type: VARCHAR
      - name: CATEGORY
        description: This column contains the category to which the product belongs. If
          the category is not available, the value is set to 'Anonymous'.
        data_type: VARCHAR
        tests:
          - not_null
      - name: SEGMENT
        description: The 'SEGMENT' column represents the market segment to which the
          product belongs. If the segment information is not available, the
          value is set to 'Anonymous'.
        data_type: VARCHAR
    description: ""
  - name: dim_dates
    description: "The 'dim_dates' model is a transformation of the 'src_date' source
      table from the 'SHOP.DEV' database. It is designed to provide a dimension
      table for dates, which can be used in sales analysis. The model includes
      the following columns: 'date_id', 'Date', 'sales_year', 'sales_month', and
      'sales_day'. The 'date_id' column is a unique identifier for each date,
      generated using the MD5 hash function. The 'Date' column is the original
      date from the source table. The 'sales_year', 'sales_month', and
      'sales_day' columns are extracted from the 'Date' column using the
      DATE_PART function. The model filters out any rows from the source table
      where the 'Date' is NULL."
    columns:
      - name: DATE_ID
        description: A unique identifier for each date. It is generated using the MD5
          hash function on the date. If the date is null, a placeholder value
          '_dbt_utils_surrogate_key_null_' is used instead.
        data_type: VARCHAR
      - name: DATE
        description: This column represents the date of the sales transaction. It is
          extracted from the 'src_date' table in the 'SHOP.DEV' database. The
          column values are not null and are of date data type.
        data_type: DATE
      - name: SALES_YEAR
        description: This column represents the year extracted from the 'Date' column in
          the source data. It is used to analyze sales data on a yearly basis.
        data_type: NUMBER
      - name: SALES_MONTH
        description: The 'SALES_MONTH' column represents the month of the sale. It is
          extracted from the 'Date' column of the 'src_date' table in the
          'SHOP.DEV' database. The value ranges from 1 to 12, where 1 represents
          January and 12 represents December.
        data_type: NUMBER
      - name: SALES_DAY
        description: This column represents the day part of the date. It is extracted
          from the 'Date' column in the source table using the DATE_PART
          function.
        data_type: NUMBER
